function init(){map=null,mapOptions={zoom:6,center:new google.maps.LatLng(46,24.976111111),mapTypeId:google.maps.MapTypeId.ROADMAP,zoomControlOptions:{style:null},mapTypeControlOptions:{style:null},scrollwheel:!0},markers=[],geocoder=new google.maps.Geocoder,infowindow=new google.maps.InfoWindow}function zoomOn(o){geocoder.geocode({address:o+", Romania"},function(o,e){e==google.maps.GeocoderStatus.OK&&(map.setCenter(o[0].geometry.location),map.setZoom(13))})}function initSearch(o){var e=document.location.hash.replace("#","").trim();""!=e&&"_=_"!=e&&document.getElementById("map-canvas")&&zoomOn(decodeURIComponent(document.location.hash)),$("#search").submit(function(){var e=$("#city").val().trim();return e?(o=o||!1,o?(zoomOn(e),document.location.hash=encodeURIComponent(e)):window.location=map_path+"#"+encodeURIComponent(e),!1):!1})}function initMap(){return document.getElementById("map-canvas")?($(window).width()<=767&&(mapOptions.zoomControlOptions.style=google.maps.ZoomControlStyle.SMALL,mapOptions.mapTypeControlOptions.style=google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapOptions.scrollwheel=!1),map=new google.maps.Map(document.getElementById("map-canvas"),mapOptions),void 0):!1}function addPins(o){google.maps.event.addListener(map,"click",function(){infowindow.close()});for(var e=["pin-recycle-bin.png","pin-recycling-center.png","pin-store.png"],n=["Pubele reciclare","Centru colectare","Magazin"],t=Handlebars.compile($("#template").html()),a=0;a<o.length;a++){var i=new google.maps.Marker({position:new google.maps.LatLng(o[a].lat,o[a].lng),icon:"/assets/"+e[o[a].point_type],title:n[o[a].type],index:a,map:map});google.maps.event.addListener(i,"click",function(){var e=this;infowindow.setContent(t(o[e.index])),infowindow.open(map,e);var n="http://graph.facebook.com/"+o[e.index].user_uid;$.get(n,function(o){$("#infowindow .img-avatar").attr("src",n+"/picture"),$("#infowindow .img-avatar").attr("title","AdÄƒugat de "+o.name)})}),markers.push(i)}new MarkerClusterer(map,markers,{gridSize:null,maxZoom:11,styles:[{url:"/assets/tree.png",width:32,height:32,anchor:[7,null],textColor:"#570a36",textSize:10}]})}